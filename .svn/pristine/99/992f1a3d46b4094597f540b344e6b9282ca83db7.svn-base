<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.siruiman.crosslogistics.mapper.SingaporeAreaBuildingMapper" >
  <resultMap id="BaseResultMap" type="com.siruiman.crosslogistics.model.SingaporeAreaBuilding" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="sa_building_id" property="saBuildingId" jdbcType="INTEGER" />
    <result column="sa_id" property="saId" jdbcType="INTEGER" />
    <result column="sa_building_name" property="saBuildingName" jdbcType="VARCHAR" />
    <result column="sa_building_lat" property="saBuildingLat" jdbcType="VARCHAR" />
    <result column="sa_building_lng" property="saBuildingLng" jdbcType="VARCHAR" />
    <result column="sa_zip_code" property="saZipCode" jdbcType="VARCHAR" />
    <result column="sa_building_address" property="saBuildingAddress" jdbcType="VARCHAR" />
    <result column="rally_point_id" property="rallyPointId" jdbcType="INTEGER" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from singapore_area_building
    where sa_building_id = #{saBuildingId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.siruiman.crosslogistics.model.SingaporeAreaBuilding" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <selectKey resultType="java.lang.Integer" keyProperty="saBuildingId" order="AFTER" >
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into singapore_area_building (sa_id,rally_point_id, sa_building_name, sa_building_lat,sa_building_lng,
      sa_zip_code, sa_building_address)
    values (#{saId,jdbcType=INTEGER},#{rallyPointId,jdbcType=INTEGER},#{saBuildingName,jdbcType=VARCHAR}, #{saBuildingLat,jdbcType=VARCHAR},
      #{saBuildingLng,jdbcType=VARCHAR}, #{saZipCode,jdbcType=VARCHAR}, #{saBuildingAddress,jdbcType=VARCHAR})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.siruiman.crosslogistics.model.SingaporeAreaBuilding" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update singapore_area_building
    set
      sa_id =#{saId,jdbcType=INTEGER},
      sa_building_name = #{saBuildingName,jdbcType=VARCHAR},
      sa_building_lat = #{saBuildingLat,jdbcType=VARCHAR},
      sa_building_lng =  #{saBuildingLng,jdbcType=VARCHAR},
      sa_zip_code = #{saZipCode,jdbcType=VARCHAR},
      rally_point_id = #{rallyPointId,jdbcType=INTEGER},
      sa_building_address=#{saBuildingAddress,jdbcType=VARCHAR}
    where sa_building_id = #{saBuildingId,jdbcType=INTEGER}
  </update>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select sab.sa_building_id,  sab.sa_id,  sab.sa_building_name,  sab.sa_building_lat, sab.sa_building_lng , sab.sa_zip_code,
    sab.rally_point_id, sab.sa_building_address,sg.singapore_area_name as singaporeAreaName
    from singapore_area_building as sab
    left join singapore_area as sg on sab.sa_id =sg.singapore_area_id
    where sab.sa_building_id = #{saBuildingId,jdbcType=INTEGER}
  </select>
  <select id="selectAll" resultMap="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select sab.sa_building_id,  sab.sa_id,  sab.sa_building_name,  sab.sa_building_lat, sab.sa_building_lng , sab.sa_zip_code,
    sab.rally_point_id, sab.sa_building_address,sg.singapore_area_name as singaporeAreaName,sab.del_state as delState
    from singapore_area_building as sab
    left join singapore_area as sg on sab.sa_id =sg.singapore_area_id
    where 1 = 1
    <if test="saZipCode !=null and saZipCode != ''">
     and sa_zip_code = #{saZipCode}
    </if>
  </select>

  <select id="getCountSGBuilding" resultType="java.lang.Integer">
    select count(sab.sa_building_id)
    from singapore_area_building as sab
    left join singapore_area as sg on sab.sa_id =sg.singapore_area_id
    where 1 = 1
    <if test="saZipCode !=null and saZipCode != ''">
      and sa_zip_code = #{saZipCode}
    </if>
  </select>
  <!--做逻辑删除-->
<update id="deleteById" parameterType="int">
  update singapore_area_building
  set  del_state = 2
  where sa_building_id=#{saBuildingId,jdbcType=INTEGER}
</update>

  <select id="selectSGBuildingByZipCode" resultMap="BaseResultMap" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select sa_building_id, sa_id, sa_building_name, sa_building_lng,sa_building_lat, sa_zip_code,
    rally_point_id,sa_building_address
    from singapore_area_building WHERE sa_zip_code = #{saZipCode}
  </select>
<select id="selectNoAreaBuilding" resultMap="BaseResultMap" parameterType="string">
  select sab.sa_building_id,  sab.sa_id,  sab.sa_building_name,  sab.sa_building_lat, sab.sa_building_lng , sab.sa_zip_code,
  sab.rally_point_id, sab.sa_building_address,sg.singapore_area_name as singaporeAreaName
  from singapore_area_building as sab
  left join singapore_area as sg on sab.sa_id =sg.singapore_area_id
  where sab.del_state = 1 and sab.sa_id is null
  <if test="saZipCode !=null and saZipCode != ''">
    and sab.sa_zip_code = #{saZipCode}
  </if>
</select>

  <select id="selectCountNoAreaBuilding" resultType="integer">
    select count(sab.sa_building_id)
    from singapore_area_building as sab
    left join singapore_area as sg on sab.sa_id =sg.singapore_area_id
    where sab.del_state = 1 and sab.sa_id is null
    <if test="saZipCode !=null and saZipCode != ''">
      and sab.sa_zip_code = #{saZipCode}
    </if>
  </select>

  <update id="updateBuidingArea" parameterType="com.siruiman.crosslogistics.model.SingaporeAreaBuilding">
    update   singapore_area_building
     set sa_id = #{saId}
    where sa_building_id = #{saBuildingId,jdbcType=INTEGER}
  </update>

  <update id="updateBuidingRallyPoint" parameterType="com.siruiman.crosslogistics.model.SingaporeAreaBuilding">
    update   singapore_area_building
     set rally_point_id = #{rallyPointId}
    where sa_building_id = #{saBuildingId,jdbcType=INTEGER}
  </update>

  <update id="updateBuidingAreaAndRallyPoint" parameterType="com.siruiman.crosslogistics.model.SingaporeAreaBuilding">
    update   singapore_area_building
     set rally_point_id = #{rallyPointId},
     sa_id = #{saId}
    where sa_building_id = #{saBuildingId,jdbcType=INTEGER}
  </update>
  <select id="selectBySaId" parameterType="integer" resultMap="BaseResultMap">
    select sa_building_id, sa_id, sa_building_lng,sa_building_lat from singapore_area_building
    where sa_id = #{singaporeAreaId}
  </select>

  <select id="selectInAreaBuilding" resultMap="BaseResultMap" parameterType="string">
    select sab.sa_building_id,  sab.sa_id,  sab.sa_building_name,  sab.sa_building_lat, sab.sa_building_lng , sab.sa_zip_code,
    sab.rally_point_id, sab.sa_building_address,sg.singapore_area_name as singaporeAreaName
    from singapore_area_building as sab
    left join singapore_area as sg on sab.sa_id =sg.singapore_area_id
    where sab.del_state = 1 and sab.sa_id is not null
    <if test="saZipCode !=null and saZipCode != ''">
      and sab.sa_zip_code = #{saZipCode}
    </if>
  </select>
  <select id="getCountInAreaBuilding" resultType="integer" parameterType="string">
    select count(sab.sa_building_id)
    from singapore_area_building as sab
    left join singapore_area as sg on sab.sa_id =sg.singapore_area_id
    where sab.del_state = 1 and sab.sa_id is not null
    <if test="saZipCode !=null and saZipCode != ''">
      and sab.sa_zip_code = #{saZipCode}
    </if>
  </select>
  <update id="recoveryBuilding" parameterType="int">
  update singapore_area_building
  set  del_state = 1
  where sa_building_id=#{saBuildingId,jdbcType=INTEGER}
</update>
</mapper>