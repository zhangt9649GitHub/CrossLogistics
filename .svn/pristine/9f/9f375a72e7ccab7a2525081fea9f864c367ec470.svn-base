<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.siruiman.crosslogistics.mapper.GoodsWarningMapper">
    <resultMap id="BaseResultMap" type="com.siruiman.crosslogistics.model.GoodsWarning">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="goods_warning_id" property="goodsWarningId" jdbcType="INTEGER"/>
        <result column="goods_id" property="goodsId" jdbcType="INTEGER"/>
        <result column="warning_comment" property="warningComment" jdbcType="VARCHAR"/>
        <result column="deal_comment" property="dealComment" jdbcType="VARCHAR"/>
        <result column="warning_state" property="warningState" jdbcType="VARCHAR"/>
        <result column="warning_type" property="warningType" jdbcType="VARCHAR"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="deal_time" property="dealTime" jdbcType="TIMESTAMP"/>
        <result column="admin_uid" property="adminUid" jdbcType="INTEGER"/>
        <result column="actual_long" property="actualLong" jdbcType="REAL"/>
        <result column="actual_width" property="actualWidth" jdbcType="REAL"/>
        <result column="actual_height" property="actualHeight" jdbcType="REAL"/>
        <result column="actual_weight" property="actualWeight" jdbcType="REAL"/>
        <result column="tripartite_number" property="tripartiteNumber" jdbcType="VARCHAR"/>
        <result column="good_type" property="goodType" jdbcType="VARCHAR"/>
        <result column="from" property="from" jdbcType="VARCHAR"/>
        <result column="delivery_number" property="deliveryNumber" jdbcType="VARCHAR"/>
        <result column="del_status" property="delStatus" jdbcType="INTEGER"/>
    </resultMap>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from goods_warning
        where goods_warning_id = #{goodsWarningId,jdbcType=INTEGER}
    </delete>
    <insert id="insert" parameterType="com.siruiman.crosslogistics.model.GoodsWarning">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <selectKey resultType="java.lang.Integer" keyProperty="goodsWarningId" order="AFTER">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into goods_warning (goods_id, warning_comment, deal_comment,
        warning_state, warning_type, create_time,
        deal_time, admin_uid,del_status)
        values (#{goodsId,jdbcType=INTEGER}, #{warningComment,jdbcType=VARCHAR}, #{dealComment,jdbcType=VARCHAR},
        #{warningState,jdbcType=VARCHAR}, #{warningType,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP},
        #{dealTime,jdbcType=TIMESTAMP}, #{adminUid,jdbcType=INTEGER},#{delStatus,jdbcType=INTEGER})
    </insert>
    <update id="updateByPrimaryKey" parameterType="com.siruiman.crosslogistics.model.GoodsWarning">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update goods_warning
        set goods_id = #{goodsId,jdbcType=INTEGER},
        warning_comment = #{warningComment,jdbcType=VARCHAR},
        deal_comment = #{dealComment,jdbcType=VARCHAR},
        warning_state = #{warningState,jdbcType=VARCHAR},
        warning_type = #{warningType,jdbcType=VARCHAR},
        create_time = #{createTime,jdbcType=TIMESTAMP},
        deal_time = #{dealTime,jdbcType=TIMESTAMP},
        admin_uid = #{adminUid,jdbcType=INTEGER},
        del_status = #{delStatus,jdbcType=INTEGER}
        where goods_warning_id = #{goodsWarningId,jdbcType=INTEGER}
    </update>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select goods_warning_id, goods_id, warning_comment, deal_comment, warning_state,
        warning_type, create_time, deal_time, admin_uid ,del_status
        from goods_warning
        where goods_warning_id = #{goodsWarningId,jdbcType=INTEGER}
    </select>
    <select id="selectAll" resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select goods_warning_id, goods_id, warning_comment, deal_comment, warning_state,
        warning_type, create_time, deal_time, admin_uid ,del_status
        from goods_warning
    </select>
    <select id="selectGoodsWarningList" resultMap="BaseResultMap" parameterType="map">
        SELECT gw.goods_warning_id,gw.goods_id,gw.warning_comment,gw.deal_comment,gw.warning_state,gw.warning_type,
        gw.create_time,gw.deal_time,gd.tripartite_number,gd.good_type,gds.actual_long,gds.actual_width,gds.actual_height,
        gds.actual_weight,gd.from,gd.delivery_number
        FROM goods_warning AS gw
        LEFT JOIN goods AS gd ON (gw.goods_id = gd.goods_id)
        LEFT JOIN goods_details AS gds ON (gw.goods_id = gds.goods_id)
        <where>
            gw.del_status = 1
            <if test="deliveryNumber != null and deliveryNumber != ''">
                AND gd.delivery_number like "%"#{deliveryNumber}"%"
            </if>
            <if test="tripartiteNumber != null and tripartiteNumber != ''">
                AND gd.tripartite_number like "%"#{tripartiteNumber}"%"
            </if>
            <if test="goodType != null and goodType != ''">
                AND gd.good_type like "%"#{goodType}"%"
            </if>
            <if test="warningState != null and warningState != ''">
                AND gw.warning_state like "%"#{warningState}"%"
            </if>
        </where>
        ORDER BY gw.goods_warning_id DESC
    </select>
    <select id="selectCountGoodsWarningList" resultType="java.lang.Integer" parameterType="map">
        SELECT COUNT(gw.goods_warning_id) AS count
        FROM goods_warning AS gw
        LEFT JOIN goods AS gd ON (gw.goods_id = gd.goods_id)
        LEFT JOIN goods_details AS gds ON (gw.goods_id = gds.goods_id)
        <where>
            gw.del_status = 1
            <if test="deliveryNumber != null and deliveryNumber != ''">
                AND gd.delivery_number like "%"#{deliveryNumber}"%"
            </if>
            <if test="tripartiteNumber != null and tripartiteNumber != ''">
                AND gd.tripartite_number like "%"#{tripartiteNumber}"%"
            </if>
            <if test="goodType != null and goodType != ''">
                AND gd.good_type like "%"#{goodType}"%"
            </if>
            <if test="warningState != null and warningState != ''">
                AND gw.warning_state like "%"#{warningState}"%"
            </if>
        </where>
        ORDER BY gw.goods_warning_id DESC
    </select>
    <select id="selectGoodsWarningByGoodsId" resultMap="BaseResultMap" parameterType="java.lang.Integer">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select goods_warning_id, goods_id, warning_comment, deal_comment, warning_state,
        warning_type, create_time, deal_time, admin_uid,del_status
        from goods_warning WHERE goods_id =#{goodsId,jdbcType=INTEGER}
    </select>
    <delete id="deleteGoodsWarningByGoodsId" parameterType="java.lang.Integer">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from goods_warning
        where goods_id = #{goodsId,jdbcType=INTEGER}
    </delete>
    <select id="getGoodsWarningNumber" resultType="java.lang.String">
    select gd.delivery_number
    FROM goods_warning AS gdw
    LEFT JOIN goods AS gd ON (gdw.goods_id = gd.goods_id) WHERE del_status = 1
  </select>
</mapper>