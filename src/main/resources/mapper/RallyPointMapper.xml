<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.siruiman.crosslogistics.mapper.RallyPointMapper">
  <resultMap id="BaseResultMap" type="com.siruiman.crosslogistics.model.RallyPoint">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="rally_point_id" jdbcType="INTEGER" property="rallyPointId" />
    <result column="rally_point_number" jdbcType="VARCHAR" property="rallyPointNumber" />
    <result column="rally_point_address" jdbcType="VARCHAR" property="rallyPointAddress" />
    <result column="rally_point_lat" jdbcType="VARCHAR" property="rallyPointLat" />
    <result column="rally_point_lng" jdbcType="VARCHAR" property="rallyPointLng" />
    <result column="rally_point_state" jdbcType="INTEGER" property="rallyPointState" />
    <result column="rally_point_account" jdbcType="VARCHAR" property="rallyPointAccount" />
    <result column="singapore_area_id" jdbcType="INTEGER" property="singaporeAreaId" />
    <result column="rally_point_name" jdbcType="VARCHAR" property="rallyPointName"/>
    <result column="del_state" jdbcType="INTEGER" property="delState" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from rally_point
    where rally_point_id = #{rallyPointId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.siruiman.crosslogistics.model.RallyPoint">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <selectKey keyProperty="rallyPointId" order="AFTER" resultType="java.lang.Integer">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into rally_point (rally_point_address, rally_point_lat, rally_point_lng,rally_point_name,rally_point_number,
      rally_point_account, singapore_area_id )
    values (#{rallyPointAddress,jdbcType=VARCHAR}, #{rallyPointLat,jdbcType=VARCHAR}, #{rallyPointLng,jdbcType=VARCHAR},
      #{rallyPointName,jdbcType=VARCHAR},#{rallyPointNumber,jdbcType=VARCHAR},
       #{rallyPointAccount,jdbcType=VARCHAR}, #{singaporeAreaId,jdbcType=INTEGER}
    )
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.siruiman.crosslogistics.model.RallyPoint">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update rally_point
    set
      rally_point_name =#{rallyPointName,jdbcType=VARCHAR},
      rally_point_number =#{rallyPointNumber,jdbcType=VARCHAR},
      rally_point_address = #{rallyPointAddress,jdbcType=VARCHAR},
      rally_point_lat =  #{rallyPointLat,jdbcType=VARCHAR},
      rally_point_lng = #{rallyPointLng,jdbcType=VARCHAR},
      rally_point_state = #{rallyPointState,jdbcType=SMALLINT},
      rally_point_account = #{rallyPointAccount,jdbcType=VARCHAR},
      singapore_area_id = #{singaporeAreaId,jdbcType=INTEGER}
    where rally_point_id = #{rallyPointId,jdbcType=INTEGER}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select rally_point_id, rally_point_address,rally_point_number, rally_point_name,rally_point_lat,rally_point_lng ,rally_point_state,
    rally_point_account, singapore_area_id, del_state
    from rally_point
    where rally_point_id = #{rallyPointId,jdbcType=INTEGER}
  </select>
  <select id="selectAll" resultMap="BaseResultMap" parameterType="com.siruiman.crosslogistics.model.RallyPoint">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select rally_point_id, rally_point_address, rally_point_lat,rally_point_lng,rally_point_number, rally_point_name , rally_point_state,
    rally_point_account,sg.singapore_area_name as sgName
    from rally_point as rp
    left join singapore_area as sg on sg.singapore_area_id = rp.singapore_area_id
    where rp.del_state = 1
    <if test="rallyPointAddress != null and rallyPointAddress != ''">
      and rp.rally_point_address like "%"#{rallyPointAddress}"%"
    </if>
    <if test="singaporeAreaId !=0 and singaporeAreaId != null">
      and rp.singapore_area_id = #{singaporeAreaId}
    </if>
  </select>
  <select id="selectCountRallyPoint" resultType="java.lang.Integer" parameterType="com.siruiman.crosslogistics.model.RallyPoint">
     select count(rally_point_id)
    from rally_point as rp
    left join singapore_area as sg on sg.singapore_area_id = rp.singapore_area_id
    where rp.del_state = 1
    <if test="rallyPointAddress!=null and rallyPointAddress!=''">
      and rp.rally_point_address like "%"#{rallyPointAddress}"%"
    </if>
    <if test="singaporeAreaId!=0 and singaporeAreaId!=null">
      and rp.singapore_area_id = #{singaporeAreaId}
    </if>
  </select>
  <!--做物理删除-->
  <update id="delRallyPointById" parameterType="int">
   update rally_point
    set del_state = 2
    where rally_point_id = #{rallyPointId,jdbcType=INTEGER}
  </update>
  <!-- del_state = 1为正常状态未删除-->
  <select id="selectRallyPointListOfIdAndAdress" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select rally_point_id, rally_point_address
    from rally_point where  del_state = 1
  </select>

  <select id="selectRallyPointListById" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select rally_point_id,rally_point_number,rally_point_name
    from rally_point
    where singapore_area_id = #{sgId}
  </select>

  <select id="selectBySGId" resultMap="BaseResultMap" parameterType="int">
    select rally_point_number,rally_point_id ,rally_point_name, rally_point_lat,rally_point_lng
    from rally_point
    where singapore_area_id = #{sgId} and del_state = 1
  </select>


  <select id="selectByName" parameterType="string" resultType="java.lang.Integer">
    select rally_point_id
    from rally_point
    where rally_point_name =#{rallyPointName}
  </select>

  <select id="selectIdByRallyPointName" resultType="java.lang.Integer">
    select rally_point_id
    from rally_point
    where rally_point_name =#{rallyPointName}
  </select>
</mapper>